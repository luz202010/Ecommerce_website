{"ast":null,"code":"import { CLEAR_PRODUCT, FETCH_PRODUCTS } from \"../types\";\nimport { FILTER_PRODUCTS_BY_SIZE, ORDER_PRODUCTS_BY_PRICE } from \"../types\";\nimport { CREATE_PRODUCT } from \"../types\";\nexport const fetchProducts = () => async dispatch => {\n  const res = await fetch(\"/api/products\");\n  const data = await res.json();\n  console.log(data);\n  dispatch({\n    type: FETCH_PRODUCTS,\n    payload: data\n  });\n};\nexport const getProducts = (id, callback) => async dispatch => {\n  fetch(\"/api/getProject\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      id\n    })\n  }).then(res => res.json()).then(data => {\n    callback(data);\n  });\n};\nexport const filterProducts = (products, size) => dispatch => {\n  dispatch({\n    type: FILTER_PRODUCTS_BY_SIZE,\n    payload: {\n      size: size,\n      items: size === \"\" ? products : products.filter(x => x.availableSizes.indexOf(size) >= 0)\n    }\n  });\n};\nexport const sortProducts = (filteredProducts, sort) => dispatch => {\n  const sortedProducts = filteredProducts.slice();\n\n  if (sort === \"latest\") {\n    sortedProducts.sort((a, b) => a._id > b._id ? 1 : -1);\n  } else {\n    sortedProducts.sort((a, b) => sort === \"lowest\" ? a.price > b.price ? 1 : -1 : a.price > b.price ? -1 : 1);\n  }\n\n  console.log(sortedProducts);\n  dispatch({\n    type: ORDER_PRODUCTS_BY_PRICE,\n    payload: {\n      sort: sort,\n      items: sortedProducts\n    }\n  });\n};\n/* Create new product */\n\nexport const createProduct = product => dispatch => {\n  fetch(\"/api/products\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(product)\n  }).then(res => res.json()).then(data => {\n    dispatch({\n      type: CREATE_PRODUCT,\n      payload: data\n    });\n  });\n};\nexport const clearProduct = () => dispatch => {\n  dispatch({\n    type: CLEAR_PRODUCT\n  });\n};","map":{"version":3,"sources":["/Users/luzhou/Downloads/Github/Ecommerce_website/src/actions/productActions.js"],"names":["CLEAR_PRODUCT","FETCH_PRODUCTS","FILTER_PRODUCTS_BY_SIZE","ORDER_PRODUCTS_BY_PRICE","CREATE_PRODUCT","fetchProducts","dispatch","res","fetch","data","json","console","log","type","payload","getProducts","id","callback","method","headers","body","JSON","stringify","then","filterProducts","products","size","items","filter","x","availableSizes","indexOf","sortProducts","filteredProducts","sort","sortedProducts","slice","a","b","_id","price","createProduct","product","clearProduct"],"mappings":"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","sourcesContent":["import {CLEAR_PRODUCT, FETCH_PRODUCTS} from \"../types\";\nimport {FILTER_PRODUCTS_BY_SIZE, ORDER_PRODUCTS_BY_PRICE} from \"../types\";\nimport {CREATE_PRODUCT} from \"../types\";\n\nexport const fetchProducts = () => async (dispatch) => {\n    const res = await fetch(\"/api/products\");\n    const data = await res.json();\n    console.log(data);\n    dispatch({\n        type: FETCH_PRODUCTS,\n        payload: data,\n    });\n};\n\nexport const getProducts = (id, callback) => async (dispatch) => {\n    fetch(\"/api/getProject\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n            id\n        }),\n    })\n        .then((res) => res.json())\n        .then((data) => {\n            callback(data)\n        });\n};\n\nexport const filterProducts = (products, size) => (dispatch) => {\n    dispatch({\n        type: FILTER_PRODUCTS_BY_SIZE,\n        payload: {\n            size: size,\n            items:\n                size === \"\"\n                    ? products\n                    : products.filter((x) => x.availableSizes.indexOf(size) >= 0),\n        },\n    });\n};\n\nexport const sortProducts = (filteredProducts, sort) => (dispatch) => {\n    const sortedProducts = filteredProducts.slice();\n    if (sort === \"latest\") {\n        sortedProducts.sort((a, b) => (a._id > b._id ? 1 : -1));\n    } else {\n        sortedProducts.sort((a, b) =>\n            sort === \"lowest\"\n                ? a.price > b.price\n                    ? 1\n                    : -1\n                : a.price > b.price\n                    ? -1\n                    : 1\n        );\n    }\n    console.log(sortedProducts);\n    dispatch({\n        type: ORDER_PRODUCTS_BY_PRICE,\n        payload: {\n            sort: sort,\n            items: sortedProducts,\n        },\n    });\n};\n\n/* Create new product */\n\nexport const createProduct = (product) => (dispatch) => {\n    fetch(\"/api/products\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(product),\n    })\n        .then((res) => res.json())\n        .then((data) => {\n            dispatch({type: CREATE_PRODUCT, payload: data});\n        });\n};\n\nexport const clearProduct = () => (dispatch) => {\n    dispatch({type: CLEAR_PRODUCT});\n};\n"]},"metadata":{},"sourceType":"module"}